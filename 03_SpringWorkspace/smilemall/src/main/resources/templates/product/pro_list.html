<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
				layout:decorate="~{/layout/baselayout}">
				

<body>
	<main role="main">
		<th:block layout:fragment="content">
			

			<!-- 카테고리 제목 -->
			<section class="jumbotron text-center">
				<div class="container">
				<h1 th:utext="${cat_name}"></h1> <!-- ProductController.java에서 cat_name매개변수로 작업 --> <!-- &등의 기호를 그대로 가져오려고  utext작업?-->
				</div>
			</section>
			<!-- 카테고리 제목 끝 -->

			<!-- 상품 템플릿 시작 -->
			<div class="album py-5 bg-light">
				<div class="container">
				
					<div class="row">
					<div class="col-md-4" th:each="product : ${pro_list}">  
						<div class="card mb-4 shadow-sm">
						<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
							<image width="100%" height="100%" th:href="${'/product/image_display?dateFolderName=' + product.pro_up_folder + '&fileName=s_' + product.pro_img}" />       
						</svg>
					
						<div class="card-body">
							<p class="card-text">
								<span th:text="${product.pro_name}"></span>
								<br>
								<span th:text="${#numbers.formatInteger(product.pro_price, '3', 'COMMA') +'원'}"></span>
							</p>    
							
							<div class="d-flex justify-content-between align-items-center">
							<div class="btn-group">
								<button type="button" class="btn btn-sm btn-outline-secondary">바로구매</button>
								<button type="button" class="btn btn-sm btn-outline-secondary">장바구니</button>
							</div>
							<small class="text-muted">(review : 0)</small>
							</div>
						</div>
						</div>
					</div>
					</div>
				
					<!-- 페이징 -->
					<!-- 원래코드
					<div class="row">
						<div class="col-md-12" >
							<nav aria-label="...">
							<ul class="pagination">
								<li class="page-item disabled">
								<a class="page-link">이전</a>
								</li>
								<li class="page-item"><a class="page-link" href="#">1</a></li>
								<li class="page-item active" aria-current="page">
								<a class="page-link" href="#">2</a>
								</li>
								<li class="page-item"><a class="page-link" href="#">3</a></li>
								<li class="page-item">
								<a class="page-link" href="#">다음</a>
								</li>
							</ul>
							</nav>
						</div>
					</div> -->

					<div class="row">
						<div class="col-md-12" >
							<nav aria-label="...">
								<ul class="pagination"> <!-- config.html에 pagination으로 가운데 정렬 요소 추가 -->
									<th:block th:if="${pageMaker.prev}">					
										<li class="page-item">
											<a class="page-link movepage" th:href="${pageMaker.startPage - 1}">이전</a>
										</li>
									</th:block>	

									<th:block th:if="${pageMaker}">
										<th:block th:each="num : ${#numbers.sequence(pageMaker.startPage, pageMaker.endPage)}">
											<li class="page-item" aria-current="page" th:classappend="${pageMaker.cri.pageNum == num ? 'active' : '' }">
												<a class="page-link movepage" th:href="${num}" th:text="${num}"></a>
											</li>
										</th:block>		
									</th:block>		
									
									<th:block th:if="${pageMaker.next}">					
										<li class="page-item">
											<a class="page-link movepage" th:href="${pageMaker.endPage + 1}">다음</a>
										</li>
									</th:block>		
									</ul>

							</nav>
						</div>
					</div>
					<!-- 페이징 끝-->
					
					<!-- 페이징 액션폼 -->
					<div class="row">
						<form id="actionForm" action="" method="get">
							<input type="hidden" name="pageNum" id="pageNum" th:value="${pageMaker.cri.pageNum}" />
							<input type="hidden" name="amount" id="amount" th:value="${pageMaker.cri.amount}" />

							<input type="hidden" name="cat_code" id="cat_code" th:value="${cat_code}" />
							<input type="hidden" name="cat_name" id="cat_name" th:value="${cat_name}" />
						</form>
					</div>
					<!-- 페이징 액션폼 끝 -->

				</div>
			</div> 
			<!--상품 템플릿 끝 -->

		</th:block>
	</main>
	
	
	<!-- 페이지별 필요한 스크립트 재정의 -->
    <th:block layout:fragment = "script">
		
		<!-- 제이쿼리 사용 시작 -->
		<script>
			$(document).ready(function(){
				
				let actionForm = $("#actionForm");

				$(".movepage").on("click", function(e) {

					e.preventDefault(); // a태그 href기능제거

					actionForm.attr("action", "/product/pro_list"); // 액션폼 action의 속성 제어

					actionForm.find("input[name='pageNum']").val($(this).attr("href")); // 액션폼의 input 태그중 name값이 pageNum인 태그의 값에 href 속성

					actionForm.submit();
				});





			}); //ready 끝.
		</script>
		<!-- 제이쿼리 사용 끝 -->
		
    </th:block>
    
</body>
</html> 
